<UserControl x:Class="Presentation.Views.MarkedItemsCleanerView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:sf="http://schemas.syncfusion.com/wpf"
             xmlns:localization="clr-namespace:Resources.Localization;assembly=Resources"
             xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
             xmlns:enums="clr-namespace:Common.Enums;assembly=Common"
             xmlns:converters="clr-namespace:Presentation.Converters"
             xmlns:controls="clr-namespace:Controls;assembly=Controls"
             xmlns:templateSelectors="clr-namespace:Presentation.TemplateSelectors">
    
    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/Syncfusion.Themes.Windows11Light.WPF;component/MSControl/ScrollViewer.xaml"/>
                <ResourceDictionary Source="pack://application:,,,/Resources;component/Themes/Generic.xaml"/>
            </ResourceDictionary.MergedDictionaries>
            
            <converters:MarkedItemsRemovingStepToStyleConverter x:Key="MarkedItemsRemovingStepToStyleConverter"
                                                                FinishStyle="{StaticResource FinishPrimaryHoverButtonStyle}"
                                                                NextStyle="{StaticResource NextPrimaryHoverButtonStyle}"/>
            
            <converters:MarkedItemsRemovingStepToVisibilityConverter x:Key="MarkedItemsRemovingStepToVisibilityConverter"/>
            
            <templateSelectors:MarkedItemsRemovingTemplateSelector x:Key="MarkedItemsRemovingTemplateSelector"
                                                                   RemovingTypeSelectorTemplate="{StaticResource RemovingTypeSelectorTemplate}"
                                                                   RemovingItemSelectionTemplate="{StaticResource RemovingItemsSelectorTemplate}"
                                                                   RemovingProcessTemplate="{StaticResource RemovingItemsProcessTemplate}"
                                                                   RemovingItemsFinishTemplate="{StaticResource RemovingItemsFinishTemplate}"/>
            
        </ResourceDictionary>
    </UserControl.Resources>
    
    <Border Style="{StaticResource DialogBorderStyle}">
        <Grid>
            
            <controls:HoverButton Style="{StaticResource CloseDialogHoverButtonStyle}">
                
                <i:Interaction.Triggers>
                    <i:EventTrigger EventName="MouseLeftButtonUp">
                        <i:InvokeCommandAction Command="{Binding CloseDialogCommand}"/>
                    </i:EventTrigger>
                </i:Interaction.Triggers>
                
            </controls:HoverButton>
        
            <Grid>
                
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>  <!-- Title -->
                    <RowDefinition Height="1"/>     <!-- Separator -->
                    <RowDefinition Height="*"/>     <!-- Content -->
                    <RowDefinition Height="1"/>     <!-- Separator -->
                    <RowDefinition Height="Auto"/>  <!-- Ok button -->
                </Grid.RowDefinitions>
                
                <TextBlock Grid.Row="0"
                           Style="{StaticResource DialogTitleTextBlockStyle}"
                           Text="{x:Static localization:Strings.RemovingMarkedItems}"/>
                
                <Border Grid.Row="1" 
                        Background="LightGray" />
                
                
                <ScrollViewer Grid.Row="2"
                              MaxHeight="800"
                              MaxWidth="800"
                              VerticalScrollBarVisibility="Auto"
                              HorizontalScrollBarVisibility="Auto">
                    
                    <ContentControl Content="{Binding MarkedItemsRemovingStep}"
                                    ContentTemplateSelector="{StaticResource MarkedItemsRemovingTemplateSelector}"/>
                    
                </ScrollViewer>
                
                <Border Grid.Row="3" 
                        Background="LightGray" />
                
                <controls:HoverButton Grid.Row="4" 
                                      Visibility="{Binding MarkedItemsRemovingStep, Converter={StaticResource MarkedItemsRemovingStepToVisibilityConverter}}"
                                      Margin="10"
                                      HorizontalAlignment="Right">
                    
                    <controls:HoverButton.Style>
                        <MultiBinding Converter="{StaticResource MarkedItemsRemovingStepToStyleConverter}">
                            <Binding Path="MarkedItemsRemovingStep"/>
                        </MultiBinding>
                    </controls:HoverButton.Style>
                    
                    <i:Interaction.Triggers>
                        <i:EventTrigger EventName="MouseLeftButtonUp">
                            <i:InvokeCommandAction Command="{Binding OkButtonClickedCommand}"/>
                        </i:EventTrigger>
                    </i:Interaction.Triggers>
                    
                </controls:HoverButton>
                
            </Grid>
        </Grid>
        
    </Border>
    
</UserControl>
